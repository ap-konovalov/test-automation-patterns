# Про паттерн Screenplay

**Screenplay** - это архитектурный паттерн для написания автотестов, который помогает делать код тестов более читаемым, гибким и повторно 
используемым. Он основан на идеи "актеров" (Actors), которые выполняют "задачи" (Tasks) и задают "вопросы" (Questions) о состоянии системы.
Проще говоря: мы моделируем поведение пользователя (или системы) как актера, который выполняет действия и проверяет результаты.

## Когда использовать?
В UI или API тестах, когда хочется иметь понятные сценарии на человеческом языке.

# Задача

Необходимо написать автотесты на REST API компании SpaceX. Конкретно на метод GET One Rocket из [документации по ссылке](https://docs.spacexdata.com/#eda45a06-9f05-40f1-a333-028f647ba797).
Предполагаем что сценарии будет ревьить аналитик и ручной тестировщик. Также хотим чтобы ручной тестировщик помогал писать сценарии 
второму тестировщику.

# Решение без применения паттерна

[GetRocketTest.java](src/test/java/GetRocketTest.java)

## ❌ Минусы:
- Нужно знать как методы RestAssured, чтобы читать и писать тест, что увеличивает порог вхождения для ручного QA.
- Что происходит в тесте поймет только тот, кто знает Java. А значит ревью сценариев аналитиком или РО может не случится.

# Как реализовать паттерн
Вариант 1: взять готовую библиотеку, например Serenity bdd и пользоваться ее методами. [Инструкция по подключению](https://serenity-bdd.github.io/docs/screenplay/screenplay_rest)
Вариант 2: Реализовать собственный паттерн Screenplay.
Для реализации нужно создать:
1) Класс Actor — это "пользователь", который выполняет действия.
2) Task — это действие или группа действий. [GetRocketInfo.java](src/main/java/ru/nmt/screenplay/GetRocketInfo.java) 
3) Question — это проверка или несколько проверок. [IsRocketInfoCorrect.java](src/main/java/ru/nmt/screenplay/IsRocketInfoCorrect.java)

# Решение с применением паттерна

[GetRocketWithScreenPlayTest.java](src/test/java/GetRocketWithScreenPlayTest.java)

## ✅ Плюсы:

- Читаемость: тест читается как сценарий, который понятен всем членам команды.
- Переиспользуемость: можно использовать Task и Question в других тестах.
- Легко добавлять новые проверки, не переписывая тест.
- Разделение ответственности: тест — это сценарий, а детали реализации спрятаны в задачах и вопросах.
- Поддержка: если селектор для UI теста или логика изменится — правим в одном месте, а не во всех тестах

# Что почитать
https://serenity-bdd.github.io/docs/screenplay/screenplay_rest