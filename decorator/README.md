#  Про паттерн Decorator
**Декоратор** — это структурный шаблон проектирования, который позволяет динамически добавлять новую функциональность к объекту, оборачивая 
его 
в "обёртки" (объекты-декораторы). Например, у нас есть какой-то объект (например, клиент для API или страница в UI), и мы хотим «обернуть» 
его дополнительным поведением — логированием, обработкой ошибок, замером времени и т.д. — не трогая сам объект.

## Когда использовать?
- Для добавления функциональности без изменения существующего кода.
- Когда нужно повторно использовать поведение (например, логирование, retry, валидация).

# Задача
Необходимо написать автотесты на REST API компании SpaceX. Конкретно на метод GET One Rocket из [документации по ссылке](https://docs.spacexdata.com/#eda45a06-9f05-40f1-a333-028f647ba797).
Помимо проверки, необходимо реализовать логирование запроса и ответа в консоль, чтобы проще было разбираться в причинах проблемы, если 
тест упадет. Также после запуска теста, выяснилось, что тестовая среда работает плохо и вызов API иногда падает по TimeOut. Чтобы не 
фейлить тест - было решено реализовать в коде механизм Retry. 

# Решение без применения паттерна

[GetRocketTest.java](src/test/java/GetRocketTest.java)

## ❌ Минусы:
- Повторение логики логирования в каждом тесте.
- Если нужно изменить формат логов — придется менять везде.
- Если нужно добавить новый функционал, например retry или замер времени — снова придется менять каждый тест.
- Нарушается принцип DRY (Don't Repeat Yourself — не повторяйся).
- Тесты становятся «шумными» — много лишнего кода, не относящегося к сути теста.

# Как реализовать паттерн
- Создадим базовый интерфейс. [ApiClient.java](src/main/java/ru/nmt/client/ApiClient.java)
- Создадим конкретные реализации этого интерфейса. [SpaceXApiClient.java](src/main/java/ru/nmt/client/SpaceXApiClient.java)
- Создадим абстрактный декоратор, вызывающий методы базового интерфейса [ApiDecorator.java](src/main/java/ru/nmt/decorator/ApiDecorator.java)
- Создадим декораторы (для логирования/для ретраев), наследующиеся от абстрактного декоратора. В них добавляем дополнительную логику к
  вызову метода базового интерфейса [LogDecorator.java](src/main/java/ru/nmt/decorator/LogDecorator.java) [RetryDecorator.java](src/main/java/ru/nmt/decorator/RetryDecorator.java)
- Используем декораторы(для логирования/для ретраев) для "декорирования" конкретных реализаций интерфейса [GetRocketWithDecoratorTest.
  java](src/test/java/GetRocketWithDecoratorTest.java)

# Решение с применением паттерна

[GetRocketWithDecoratorTest.java](src/test/java/GetRocketWithDecoratorTest.java)

## ✅ Плюсы:
- Можно повторно использовать логику декораторов в разных Api клиентах.
- Можно легко добавить другие декораторы к клиенту, не изменяя его код.
- Тесты становятся чище — только суть теста, без технических деталей.
- Упрощается поддержка: если нужно изменить логирование — меняем только в одном месте.
- Код становится гибким и расширяемым.

##  Что почитать:
https://refactoring.guru/ru/design-patterns/decorator (открывается с VPN)